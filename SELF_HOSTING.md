# Self Hosting
This project is not runnable out of the box and requires additional setup.


### Notice: By self hosting, you acknowledge the licenses written in ./LICENSE.md & ./LICENSE where:
    1. Halcyon License -> All source code
    2. GNU Affero -> All static api JSON files
Any security vulnerabilities introduced during hosting is at your own dispense.
You are also to assure the entire safe management of the internal secure db that preserves
individual user's identity with the bot. Furthermore, you are entitled to do anything with these
data collected, be it anything that does not involve monetary contracts between
the user and bot.
<hr>

The primitive things you need to even start things are the following:

1. NodeJS [Latest?]
2. NPM [package.json]
3. JDK 8+ [OPTIONAL], with classpath linked to JSOUP.jar in ./lib/
4. A free Discord bot profile
5. Git (OPTIONAL unless if you would like constant updates)

The last steps are quite simple once you have the above.

You need to first grab your bot profile's token and then follow this file template and place it in the directory `./internals/`
as `MANIFEST.json`
```json

{
  "TOKEN": "",
  "MASTER_ID": "",
  "users-registry": "users-registry",
  "blacklisted-registry": "blacklisted-users-registry",
  "bronze-emoji": "",
  "silver-emoji": "",
  "platinum-emoji": "",
  "unknown-div-emoji": "",
  "gold-emoji": "",
  "api_endpoints": {
    "owo_endpoint_own": "",
    "fact_endpoint_own": "",
    "backend": ""
  },
  "database_backed_schema_v": "OUT_POST_SERVER",
  "bot-telemetry-registry": "bot-telemetry-data-registry"
}
```
You are to provide the emptied token spots for these fields:
* `TOKEN` the bot's api token, generated by Discord (DO NOT SHARE)
* `MASTER_ID` the bot owner's ID, this is not the original developer's ID (exoad 'Jack Meng')
* `[bronze,silver,gold,platinum,unknown-div]-emoji` emoji ID's to be used
* `api_endpoints` for each sub key, you must provide a valid token or leave them blank to disable the "fun" commands

## Auto updating static API

This step requires you have a Java runtime (preferably Java JSE11+). Then you can run the attached the Java parsing files under "pkg/src/jackmeng/" in the following order:

**IN NO WAY SHOULD THE STATIC API SCRAPER BE IN RUN CONCURRENCE WITH THE NODEJS BACKEND. THERE ARE NO SYNCHRONIZATION AND MAY CAUSE UNWANTED OVERWRITS AND CORRUPTED READS BY BOTH ENDS (Java + JS)**

1. `run_Scraper.java` -> Generates the necessary JSON files that can then be interpreted and categorized later by other parsers.
2. `run_Parser.java` ->  Generates child JSON files from the original scraped JSON and divides them to be easily consumed by the JavaScript end
3. `run_ContestTime.java` -> Generates an almost optional child scraped JSON that is not related to the USACO contest problems itself.
